# Copyright The Linux Foundation and each contributor to LFX.
# SPDX-License-Identifier: MIT
---
# Local development overrides for lfx-v2-mailing-list-service
# Use with: helm install -f values.local.yaml or make helm-install-local
# This file configures the service for local testing with mock authentication
# DO NOT USE IN PRODUCTION

# Local development domain
lfx:
  domain: "k8s.orb.local"

# Use latest image with always pull policy for local development
image:
  tag: "latest"
  pullPolicy: Always

# Application configuration for local development
app:
  # Disable OIDC contextualizer for local testing
  use_oidc_contextualizer: false

  environment:
    # Enable debug logging for local development
    LOG_LEVEL:
      value: debug
    LOG_ADD_SOURCE:
      value: true

    # Use mock authentication for local testing
    AUTH_SOURCE:
      value: mock

    # Mock principal for local development - bypasses JWT validation
    JWT_AUTH_DISABLED_MOCK_LOCAL_PRINCIPAL:
      value: "project_super_admin"

    # Use NATS repository to connect to real projects from local k8s or mock for local testing
    REPOSITORY_SOURCE:
      value: nats

    # Use mock GroupsIO integration for local testing
    GROUPSIO_SOURCE:
      value: mock

    # Empty credentials for mock mode (not used in mock mode)
    GROUPSIO_EMAIL:
      value: ""
    GROUPSIO_PASSWORD:
      value: ""

    # Webhook secret for local testing (NOT FOR PRODUCTION)
    GROUPSIO_WEBHOOK_SECRET:
      value: ""

# Disable OpenFGA authorization for local testing
openfga:
  enabled: false

# Disable Heimdall middleware for local testing
heimdall:
  enabled: false

# Disable Authelia authentication for local testing
authelia:
  enabled: false

# Service account configuration for local development
serviceAccount:
  create: true
  name: ""
