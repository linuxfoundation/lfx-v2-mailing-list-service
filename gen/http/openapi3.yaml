openapi: 3.0.3
info:
    title: Mailing List Service
    description: Service for managing mailing lists in LFX
    version: 0.0.1
servers:
    - url: http://localhost:80
      description: Default server for mailing-list
paths:
    /groupsio/services:
        post:
            tags:
                - mailing-list
            summary: create-grpsio-service mailing-list
            description: Create GroupsIO service with type-specific validation rules
            operationId: mailing-list#create-grpsio-service
            parameters:
                - name: v
                  in: query
                  description: Version of the API
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Version of the API
                    example: "1"
                    enum:
                        - "1"
                  example: "1"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateGrpsioServiceRequestBody'
                        example:
                            auditors:
                                - auditor_user_id1
                                - auditor_user_id2
                            domain: lists.project.org
                            global_owners:
                                - admin@example.com
                            group_id: 12345
                            group_name: project-name
                            prefix: formation
                            project_slug: cncf
                            project_uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                            public: true
                            status: created
                            type: primary
                            url: https://lists.project.org
                            writers:
                                - manager_user_id1
                                - manager_user_id2
            responses:
                "201":
                    description: Created response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ServiceFull'
                            example:
                                auditors:
                                    - auditor_user_id1
                                    - auditor_user_id2
                                created_at: "2023-01-15T10:30:00Z"
                                domain: lists.project.org
                                global_owners:
                                    - admin@example.com
                                group_id: 12345
                                group_name: project-name
                                last_audited_by: user_id_12345
                                last_audited_time: "2023-05-10T09:15:00Z"
                                last_reviewed_at: "2025-08-04T09:00:00Z"
                                last_reviewed_by: user_id_12345
                                prefix: formation
                                project_name: Cloud Native Computing Foundation
                                project_slug: cncf
                                project_uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                                public: true
                                status: created
                                type: primary
                                uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                                updated_at: "2023-06-20T14:45:30Z"
                                url: https://lists.project.org
                                writers:
                                    - manager_user_id1
                                    - manager_user_id2
                "400":
                    description: 'BadRequest: Bad request - Invalid type, missing required fields, or validation failures'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BadRequestError'
                            example:
                                message: The request was invalid.
                "404":
                    description: 'NotFound: Resource not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/NotFoundError'
                            example:
                                message: The resource was not found.
                "409":
                    description: 'Conflict: Conflict'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ConflictError'
                            example:
                                message: The resource already exists.
                "500":
                    description: 'InternalServerError: Internal server error'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/InternalServerError'
                            example:
                                message: An internal server error occurred.
                "503":
                    description: 'ServiceUnavailable: Service unavailable'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ServiceUnavailableError'
                            example:
                                message: The service is unavailable.
            security:
                - jwt_header_Authorization: []
    /groupsio/services/{uid}:
        delete:
            tags:
                - mailing-list
            summary: delete-grpsio-service mailing-list
            description: Delete GroupsIO service
            operationId: mailing-list#delete-grpsio-service
            parameters:
                - name: v
                  in: query
                  description: Version of the API
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Version of the API
                    example: "1"
                    enum:
                        - "1"
                  example: "1"
                - name: uid
                  in: path
                  description: Service UID -- unique identifier for the service
                  required: true
                  schema:
                    type: string
                    description: Service UID -- unique identifier for the service
                    example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                    format: uuid
                  example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                - name: If-Match
                  in: header
                  description: If-Match header value for conditional requests
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: If-Match header value for conditional requests
                    example: "123"
                  example: "123"
            responses:
                "204":
                    description: No Content response.
                "400":
                    description: 'BadRequest: Bad request'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BadRequestError'
                            example:
                                message: The request was invalid.
                "404":
                    description: 'NotFound: Resource not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/NotFoundError'
                            example:
                                message: The resource was not found.
                "409":
                    description: 'Conflict: Conflict'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ConflictError'
                            example:
                                message: The resource already exists.
                "500":
                    description: 'InternalServerError: Internal server error'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/InternalServerError'
                            example:
                                message: An internal server error occurred.
                "503":
                    description: 'ServiceUnavailable: Service unavailable'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ServiceUnavailableError'
                            example:
                                message: The service is unavailable.
            security:
                - jwt_header_Authorization: []
        get:
            tags:
                - mailing-list
            summary: get-grpsio-service mailing-list
            description: Get groupsIO service details by ID
            operationId: mailing-list#get-grpsio-service
            parameters:
                - name: v
                  in: query
                  description: Version of the API
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Version of the API
                    example: "1"
                    enum:
                        - "1"
                  example: "1"
                - name: uid
                  in: path
                  description: Service UID -- unique identifier for the service
                  required: true
                  schema:
                    type: string
                    description: Service UID -- unique identifier for the service
                    example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                    format: uuid
                  example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
            responses:
                "200":
                    description: OK response.
                    headers:
                        ETag:
                            description: ETag header value
                            schema:
                                type: string
                                description: ETag header value
                                example: "123"
                            example: "123"
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ServiceWithReadonlyAttributes'
                            example:
                                auditors:
                                    - auditor_user_id1
                                    - auditor_user_id2
                                created_at: "2023-01-15T10:30:00Z"
                                domain: lists.project.org
                                global_owners:
                                    - admin@example.com
                                group_id: 12345
                                group_name: project-name
                                last_audited_by: user_id_12345
                                last_audited_time: "2023-05-10T09:15:00Z"
                                last_reviewed_at: "2025-08-04T09:00:00Z"
                                last_reviewed_by: user_id_12345
                                prefix: formation
                                project_name: Cloud Native Computing Foundation
                                project_slug: cncf
                                project_uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                                public: true
                                status: created
                                type: primary
                                uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                                updated_at: "2023-06-20T14:45:30Z"
                                url: https://lists.project.org
                                writers:
                                    - manager_user_id1
                                    - manager_user_id2
                "400":
                    description: 'BadRequest: Bad request'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BadRequestError'
                            example:
                                message: The request was invalid.
                "404":
                    description: 'NotFound: Resource not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/NotFoundError'
                            example:
                                message: The resource was not found.
                "500":
                    description: 'InternalServerError: Internal server error'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/InternalServerError'
                            example:
                                message: An internal server error occurred.
                "503":
                    description: 'ServiceUnavailable: Service unavailable'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ServiceUnavailableError'
                            example:
                                message: The service is unavailable.
            security:
                - jwt_header_Authorization: []
        put:
            tags:
                - mailing-list
            summary: update-grpsio-service mailing-list
            description: Update GroupsIO service
            operationId: mailing-list#update-grpsio-service
            parameters:
                - name: v
                  in: query
                  description: Version of the API
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: Version of the API
                    example: "1"
                    enum:
                        - "1"
                  example: "1"
                - name: uid
                  in: path
                  description: Service UID -- unique identifier for the service
                  required: true
                  schema:
                    type: string
                    description: Service UID -- unique identifier for the service
                    example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                    format: uuid
                  example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                - name: If-Match
                  in: header
                  description: If-Match header value for conditional requests
                  allowEmptyValue: true
                  schema:
                    type: string
                    description: If-Match header value for conditional requests
                    example: "123"
                  example: "123"
            requestBody:
                required: true
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/CreateGrpsioServiceRequestBody'
                        example:
                            auditors:
                                - auditor_user_id1
                                - auditor_user_id2
                            domain: lists.project.org
                            global_owners:
                                - admin@example.com
                            group_id: 12345
                            group_name: project-name
                            prefix: formation
                            project_slug: cncf
                            project_uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                            public: true
                            status: created
                            type: primary
                            url: https://lists.project.org
                            writers:
                                - manager_user_id1
                                - manager_user_id2
            responses:
                "200":
                    description: OK response.
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ServiceWithReadonlyAttributes'
                            example:
                                auditors:
                                    - auditor_user_id1
                                    - auditor_user_id2
                                created_at: "2023-01-15T10:30:00Z"
                                domain: lists.project.org
                                global_owners:
                                    - admin@example.com
                                group_id: 12345
                                group_name: project-name
                                last_audited_by: user_id_12345
                                last_audited_time: "2023-05-10T09:15:00Z"
                                last_reviewed_at: "2025-08-04T09:00:00Z"
                                last_reviewed_by: user_id_12345
                                prefix: formation
                                project_name: Cloud Native Computing Foundation
                                project_slug: cncf
                                project_uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                                public: true
                                status: created
                                type: primary
                                uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                                updated_at: "2023-06-20T14:45:30Z"
                                url: https://lists.project.org
                                writers:
                                    - manager_user_id1
                                    - manager_user_id2
                "400":
                    description: 'BadRequest: Bad request'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/BadRequestError'
                            example:
                                message: The request was invalid.
                "404":
                    description: 'NotFound: Resource not found'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/NotFoundError'
                            example:
                                message: The resource was not found.
                "409":
                    description: 'Conflict: Conflict'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ConflictError'
                            example:
                                message: The resource already exists.
                "500":
                    description: 'InternalServerError: Internal server error'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/InternalServerError'
                            example:
                                message: An internal server error occurred.
                "503":
                    description: 'ServiceUnavailable: Service unavailable'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ServiceUnavailableError'
                            example:
                                message: The service is unavailable.
            security:
                - jwt_header_Authorization: []
    /livez:
        get:
            tags:
                - mailing-list
            summary: livez mailing-list
            description: Check if the service is alive.
            operationId: mailing-list#livez
            responses:
                "200":
                    description: OK response.
                    content:
                        text/plain:
                            schema:
                                type: string
                                example: OK
                                format: binary
                            example: OK
    /openapi.json:
        get:
            tags:
                - mailing-list
            summary: Download gen/http/openapi3.json
            operationId: mailing-list#/openapi.json
            responses:
                "200":
                    description: File downloaded
    /readyz:
        get:
            tags:
                - mailing-list
            summary: readyz mailing-list
            description: Check if the service is able to take inbound requests.
            operationId: mailing-list#readyz
            responses:
                "200":
                    description: OK response.
                    content:
                        text/plain:
                            schema:
                                type: string
                                example: OK
                                format: binary
                            example: OK
                "503":
                    description: 'ServiceUnavailable: Service unavailable'
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/ServiceUnavailableError'
                            example:
                                message: The service is unavailable.
components:
    schemas:
        BadRequestError:
            type: object
            properties:
                message:
                    type: string
                    description: Error message
                    example: The request was invalid.
            example:
                message: The request was invalid.
            required:
                - message
        ConflictError:
            type: object
            properties:
                message:
                    type: string
                    description: Error message
                    example: The resource already exists.
            example:
                message: The resource already exists.
            required:
                - message
        CreateGrpsioServiceRequestBody:
            type: object
            properties:
                auditors:
                    type: array
                    items:
                        type: string
                        example: Qui quia.
                    description: Auditor user IDs who can audit this service
                    example:
                        - auditor_user_id1
                        - auditor_user_id2
                domain:
                    type: string
                    description: Service domain
                    example: lists.project.org
                global_owners:
                    type: array
                    items:
                        type: string
                        example: aditya@klein.org
                        format: email
                    description: List of global owner email addresses (required for primary, forbidden for shared)
                    example:
                        - admin@example.com
                group_id:
                    type: integer
                    description: GroupsIO group ID
                    example: 12345
                    format: int64
                group_name:
                    type: string
                    description: GroupsIO group name
                    example: project-name
                prefix:
                    type: string
                    description: Email prefix (required for formation and shared, forbidden for primary)
                    example: formation
                project_slug:
                    type: string
                    description: Project slug identifier
                    example: cncf
                    format: regexp
                    pattern: ^[a-z][a-z0-9_\-]*[a-z0-9]$
                project_uid:
                    type: string
                    description: LFXv2 Project UID
                    example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                    format: uuid
                public:
                    type: boolean
                    description: Whether the service is publicly accessible
                    default: false
                    example: true
                status:
                    type: string
                    description: Service status
                    example: created
                type:
                    type: string
                    description: Service type
                    example: primary
                    enum:
                        - primary
                        - formation
                        - shared
                url:
                    type: string
                    description: Service URL
                    example: https://lists.project.org
                    format: uri
                writers:
                    type: array
                    items:
                        type: string
                        example: Rerum ea nesciunt maiores quibusdam voluptatem.
                    description: Manager user IDs who can edit/modify this service
                    example:
                        - manager_user_id1
                        - manager_user_id2
            example:
                auditors:
                    - auditor_user_id1
                    - auditor_user_id2
                domain: lists.project.org
                global_owners:
                    - admin@example.com
                group_id: 12345
                group_name: project-name
                prefix: formation
                project_slug: cncf
                project_uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                public: true
                status: created
                type: primary
                url: https://lists.project.org
                writers:
                    - manager_user_id1
                    - manager_user_id2
            required:
                - type
                - project_uid
        InternalServerError:
            type: object
            properties:
                message:
                    type: string
                    description: Error message
                    example: An internal server error occurred.
            example:
                message: An internal server error occurred.
            required:
                - message
        NotFoundError:
            type: object
            properties:
                message:
                    type: string
                    description: Error message
                    example: The resource was not found.
            example:
                message: The resource was not found.
            required:
                - message
        ServiceFull:
            type: object
            properties:
                auditors:
                    type: array
                    items:
                        type: string
                        example: Saepe qui.
                    description: Auditor user IDs who can audit this service
                    example:
                        - auditor_user_id1
                        - auditor_user_id2
                created_at:
                    type: string
                    description: The timestamp when the service was created (read-only)
                    example: "2023-01-15T10:30:00Z"
                    format: date-time
                domain:
                    type: string
                    description: Service domain
                    example: lists.project.org
                global_owners:
                    type: array
                    items:
                        type: string
                        example: berniece_ondricka@nolan.name
                        format: email
                    description: List of global owner email addresses (required for primary, forbidden for shared)
                    example:
                        - admin@example.com
                group_id:
                    type: integer
                    description: GroupsIO group ID
                    example: 12345
                    format: int64
                group_name:
                    type: string
                    description: GroupsIO group name
                    example: project-name
                last_audited_by:
                    type: string
                    description: The user ID who last audited the service
                    example: user_id_12345
                last_audited_time:
                    type: string
                    description: The timestamp when the service was last audited
                    example: "2023-05-10T09:15:00Z"
                    format: date-time
                last_reviewed_at:
                    type: string
                    description: The timestamp when the service was last reviewed in RFC3339 format
                    example: "2025-08-04T09:00:00Z"
                    format: date-time
                last_reviewed_by:
                    type: string
                    description: The user ID who last reviewed this service
                    example: user_id_12345
                prefix:
                    type: string
                    description: Email prefix (required for formation and shared, forbidden for primary)
                    example: formation
                project_name:
                    type: string
                    description: Project name (read-only)
                    example: Cloud Native Computing Foundation
                project_slug:
                    type: string
                    description: Project slug identifier
                    example: cncf
                    format: regexp
                    pattern: ^[a-z][a-z0-9_\-]*[a-z0-9]$
                project_uid:
                    type: string
                    description: LFXv2 Project UID
                    example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                    format: uuid
                public:
                    type: boolean
                    description: Whether the service is publicly accessible
                    default: false
                    example: true
                status:
                    type: string
                    description: Service status
                    example: created
                type:
                    type: string
                    description: Service type
                    example: primary
                    enum:
                        - primary
                        - formation
                        - shared
                uid:
                    type: string
                    description: Service UID -- unique identifier for the service
                    example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                    format: uuid
                updated_at:
                    type: string
                    description: The timestamp when the service was last updated (read-only)
                    example: "2023-06-20T14:45:30Z"
                    format: date-time
                url:
                    type: string
                    description: Service URL
                    example: https://lists.project.org
                    format: uri
                writers:
                    type: array
                    items:
                        type: string
                        example: Ad aut saepe.
                    description: Manager user IDs who can edit/modify this service
                    example:
                        - manager_user_id1
                        - manager_user_id2
            description: A complete representation of GroupsIO services with all attributes including access control and audit trail.
            example:
                auditors:
                    - auditor_user_id1
                    - auditor_user_id2
                created_at: "2023-01-15T10:30:00Z"
                domain: lists.project.org
                global_owners:
                    - admin@example.com
                group_id: 12345
                group_name: project-name
                last_audited_by: user_id_12345
                last_audited_time: "2023-05-10T09:15:00Z"
                last_reviewed_at: "2025-08-04T09:00:00Z"
                last_reviewed_by: user_id_12345
                prefix: formation
                project_name: Cloud Native Computing Foundation
                project_slug: cncf
                project_uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                public: true
                status: created
                type: primary
                uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                updated_at: "2023-06-20T14:45:30Z"
                url: https://lists.project.org
                writers:
                    - manager_user_id1
                    - manager_user_id2
            required:
                - type
                - project_uid
        ServiceUnavailableError:
            type: object
            properties:
                message:
                    type: string
                    description: Error message
                    example: The service is unavailable.
            example:
                message: The service is unavailable.
            required:
                - message
        ServiceWithReadonlyAttributes:
            type: object
            properties:
                auditors:
                    type: array
                    items:
                        type: string
                        example: Asperiores suscipit quia.
                    description: Auditor user IDs who can audit this service
                    example:
                        - auditor_user_id1
                        - auditor_user_id2
                created_at:
                    type: string
                    description: The timestamp when the service was created (read-only)
                    example: "2023-01-15T10:30:00Z"
                    format: date-time
                domain:
                    type: string
                    description: Service domain
                    example: lists.project.org
                global_owners:
                    type: array
                    items:
                        type: string
                        example: amya.fahey@bailey.name
                        format: email
                    description: List of global owner email addresses (required for primary, forbidden for shared)
                    example:
                        - admin@example.com
                group_id:
                    type: integer
                    description: GroupsIO group ID
                    example: 12345
                    format: int64
                group_name:
                    type: string
                    description: GroupsIO group name
                    example: project-name
                last_audited_by:
                    type: string
                    description: The user ID who last audited the service
                    example: user_id_12345
                last_audited_time:
                    type: string
                    description: The timestamp when the service was last audited
                    example: "2023-05-10T09:15:00Z"
                    format: date-time
                last_reviewed_at:
                    type: string
                    description: The timestamp when the service was last reviewed in RFC3339 format
                    example: "2025-08-04T09:00:00Z"
                    format: date-time
                last_reviewed_by:
                    type: string
                    description: The user ID who last reviewed this service
                    example: user_id_12345
                prefix:
                    type: string
                    description: Email prefix (required for formation and shared, forbidden for primary)
                    example: formation
                project_name:
                    type: string
                    description: Project name (read-only)
                    example: Cloud Native Computing Foundation
                project_slug:
                    type: string
                    description: Project slug identifier
                    example: cncf
                    format: regexp
                    pattern: ^[a-z][a-z0-9_\-]*[a-z0-9]$
                project_uid:
                    type: string
                    description: LFXv2 Project UID
                    example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                    format: uuid
                public:
                    type: boolean
                    description: Whether the service is publicly accessible
                    default: false
                    example: true
                status:
                    type: string
                    description: Service status
                    example: created
                type:
                    type: string
                    description: Service type
                    example: primary
                    enum:
                        - primary
                        - formation
                        - shared
                uid:
                    type: string
                    description: Service UID -- unique identifier for the service
                    example: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                    format: uuid
                updated_at:
                    type: string
                    description: The timestamp when the service was last updated (read-only)
                    example: "2023-06-20T14:45:30Z"
                    format: date-time
                url:
                    type: string
                    description: Service URL
                    example: https://lists.project.org
                    format: uri
                writers:
                    type: array
                    items:
                        type: string
                        example: Aspernatur eius vero amet.
                    description: Manager user IDs who can edit/modify this service
                    example:
                        - manager_user_id1
                        - manager_user_id2
            description: A representation of GroupsIO services with readonly attributes.
            example:
                auditors:
                    - auditor_user_id1
                    - auditor_user_id2
                created_at: "2023-01-15T10:30:00Z"
                domain: lists.project.org
                global_owners:
                    - admin@example.com
                group_id: 12345
                group_name: project-name
                last_audited_by: user_id_12345
                last_audited_time: "2023-05-10T09:15:00Z"
                last_reviewed_at: "2025-08-04T09:00:00Z"
                last_reviewed_by: user_id_12345
                prefix: formation
                project_name: Cloud Native Computing Foundation
                project_slug: cncf
                project_uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                public: true
                status: created
                type: primary
                uid: 7cad5a8d-19d0-41a4-81a6-043453daf9ee
                updated_at: "2023-06-20T14:45:30Z"
                url: https://lists.project.org
                writers:
                    - manager_user_id1
                    - manager_user_id2
            required:
                - type
                - project_uid
    securitySchemes:
        jwt_header_Authorization:
            type: http
            description: Heimdall authorization
            scheme: bearer
tags:
    - name: mailing-list
      description: The mailing list service manages mailing lists and services
